(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45306fc0"],{"0a37":function(t,e,n){"use strict";var i=n("d5a2"),r=n.n(i);r.a},1276:function(t,e,n){"use strict";var i=n("d784"),r=n("44e7"),a=n("825a"),o=n("1d80"),s=n("4840"),l=n("8aa5"),c=n("50c4"),u=n("14c3"),f=n("9263"),d=n("d039"),p=[].push,v=Math.min,g=4294967295,h=!d((function(){return!RegExp(g,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(o(this)),a=void 0===n?g:n>>>0;if(0===a)return[];if(void 0===t)return[i];if(!r(t))return e.call(i,t,a);var s,l,c,u=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,h=new RegExp(t.source,d+"g");while(s=f.call(h,i)){if(l=h.lastIndex,l>v&&(u.push(i.slice(v,s.index)),s.length>1&&s.index<i.length&&p.apply(u,s.slice(1)),c=s[0].length,v=l,u.length>=a))break;h.lastIndex===s.index&&h.lastIndex++}return v===i.length?!c&&h.test("")||u.push(""):u.push(i.slice(v)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=o(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,r,n):i.call(String(r),e,n)},function(t,r){var o=n(i,t,this,r,i!==e);if(o.done)return o.value;var f=a(t),d=String(this),p=s(f,RegExp),m=f.unicode,b=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(h?"y":"g"),x=new p(h?f:"^(?:"+f.source+")",b),y=void 0===r?g:r>>>0;if(0===y)return[];if(0===d.length)return null===u(x,d)?[d]:[];var I=0,C=0,E=[];while(C<d.length){x.lastIndex=h?C:0;var _,S=u(x,h?d:d.slice(C));if(null===S||(_=v(c(x.lastIndex+(h?0:C)),d.length))===I)C=l(d,C,m);else{if(E.push(d.slice(I,C)),E.length===y)return E;for(var T=1;T<=S.length-1;T++)if(E.push(S[T]),E.length===y)return E;C=I=_}}return E.push(d.slice(I)),E}]}),!h)},"14c3":function(t,e,n){var i=n("c6b6"),r=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"1dde":function(t,e,n){var i=n("d039"),r=n("b622"),a=n("2d00"),o=r("species");t.exports=function(t){return a>=51||!i((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"44e7":function(t,e,n){var i=n("861d"),r=n("c6b6"),a=n("b622"),o=a("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},5319:function(t,e,n){"use strict";var i=n("d784"),r=n("825a"),a=n("7b0b"),o=n("50c4"),s=n("a691"),l=n("1d80"),c=n("8aa5"),u=n("14c3"),f=Math.max,d=Math.min,p=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var m=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=i.REPLACE_KEEPS_$0,x=m?"$":"$0";return[function(n,i){var r=l(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!m&&b||"string"===typeof i&&-1===i.indexOf(x)){var a=n(e,t,this,i);if(a.done)return a.value}var l=r(t),p=String(this),v="function"===typeof i;v||(i=String(i));var g=l.global;if(g){var I=l.unicode;l.lastIndex=0}var C=[];while(1){var E=u(l,p);if(null===E)break;if(C.push(E),!g)break;var _=String(E[0]);""===_&&(l.lastIndex=c(p,o(l.lastIndex),I))}for(var S="",T=0,w=0;w<C.length;w++){E=C[w];for(var R=String(E[0]),$=f(d(s(E.index),p.length),0),A=[],k=1;k<E.length;k++)A.push(h(E[k]));var F=E.groups;if(v){var N=[R].concat(A,$,p);void 0!==F&&N.push(F);var O=String(i.apply(void 0,N))}else O=y(R,p,$,A,F,i);$>=T&&(S+=p.slice(T,$)+O,T=$+R.length)}return S+p.slice(T)}];function y(t,n,i,r,o,s){var l=i+t.length,c=r.length,u=g;return void 0!==o&&(o=a(o),u=v),e.call(s,u,(function(e,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(l);case"<":s=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return e;if(u>c){var f=p(u/10);return 0===f?e:f<=c?void 0===r[f-1]?a.charAt(1):r[f-1]+a.charAt(1):e}s=r[u-1]}return void 0===s?"":s}))}}))},6547:function(t,e,n){var i=n("a691"),r=n("1d80"),a=function(t){return function(e,n){var a,o,s=String(r(e)),l=i(n),c=s.length;return l<0||l>=c?t?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},"65f0":function(t,e,n){var i=n("861d"),r=n("e8b5"),a=n("b622"),o=a("species");t.exports=function(t,e){var n;return r(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?i(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},8418:function(t,e,n){"use strict";var i=n("c04e"),r=n("9bf2"),a=n("5c6c");t.exports=function(t,e,n){var o=i(e);o in t?r.f(t,o,a(0,n)):t[o]=n}},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},9263:function(t,e,n){"use strict";var i=n("ad6d"),r=n("9f7f"),a=RegExp.prototype.exec,o=String.prototype.replace,s=a,l=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=l||u||c;f&&(s=function(t){var e,n,r,s,f=this,d=c&&f.sticky,p=i.call(f),v=f.source,g=0,h=t;return d&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),h=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(v="(?: "+v+")",h=" "+h,g++),n=new RegExp("^(?:"+v+")",p)),u&&(n=new RegExp("^"+v+"$(?!\\s)",p)),l&&(e=f.lastIndex),r=a.call(d?n:f,h),d?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=f.lastIndex,f.lastIndex+=r[0].length):f.lastIndex=0:l&&r&&(f.lastIndex=f.global?r.index+r[0].length:e),u&&r&&r.length>1&&o.call(r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r}),t.exports=s},"97a9":function(t,e,n){"use strict";n.r(e);var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span"),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增容器")])],1),n("div",{staticClass:"wrapper"},t._l(t.containerList,(function(e,i){return n("div",{key:i,staticClass:"item"},[n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("容器ID：")]),n("span",{staticClass:"value"},[t._v(t._s(e.id))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v(" 容器名称：")]),n("span",{staticClass:"value"},[t._v(t._s(e.containerName))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("地址类型：")]),n("span",{staticClass:"value"},[t._v(t._s(e.sourceType))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("文件版本：")]),n("span",{staticClass:"value"},[t._v(t._s(e.version))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("部署日期：")]),n("span",{staticClass:"value"},[t._v(t._s(e.lastDeployTime))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("当前状态：")]),n("span",{staticClass:"value"},[t._v(t._s(e.status))])]),n("div",{staticStyle:{width:"240px",margin:"0 auto"}},[n("div",{staticClass:"btnWrap"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.arrangeItem(e)}}},[t._v("部署")])],1),n("div",{staticClass:"btnWrap"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.editItem(e)}}},[t._v("编辑")])],1),n("div",{staticClass:"btnWrap"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.deleteItem(e,i)}}},[t._v("删除")])],1),n("div",{staticClass:"btnWrap"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.listOfItem(e)}}},[t._v("机器列表")])],1)])])})),0)]),n("el-dialog",{attrs:{title:"新增容器",visible:t.dialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeEdit}},[n("el-form",{ref:"form",staticClass:"genTable",attrs:{model:t.form,"label-width":"150px","label-position":"left"}},[n("el-form-item",{attrs:{label:"Container Name"}},[n("el-input",{model:{value:t.form.containerName,callback:function(e){t.$set(t.form,"containerName",e)},expression:"form.containerName"}})],1),n("el-form-item",{attrs:{label:"地址类型"}},[n("el-radio-group",{model:{value:t.form.sourceType,callback:function(e){t.$set(t.form,"sourceType",e)},expression:"form.sourceType"}},[n("el-radio",{attrs:{label:"Git"}}),n("el-radio",{attrs:{label:"FatJar"}})],1)],1),"Git"==t.form.sourceType?n("el-form",{ref:"gitform",staticClass:"gitTable",attrs:{model:t.gitForm,"label-width":"150px","label-position":"left"}},[n("el-form-item",{attrs:{label:"Git仓库地址"}},[n("el-input",{model:{value:t.gitForm.repo,callback:function(e){t.$set(t.gitForm,"repo",e)},expression:"gitForm.repo"}})],1),n("el-form-item",{attrs:{label:"分支名称"}},[n("el-input",{model:{value:t.gitForm.branch,callback:function(e){t.$set(t.gitForm,"branch",e)},expression:"gitForm.branch"}})],1),n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:t.gitForm.username,callback:function(e){t.$set(t.gitForm,"username",e)},expression:"gitForm.username"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{model:{value:t.gitForm.password,callback:function(e){t.$set(t.gitForm,"password",e)},expression:"gitForm.password"}})],1)],1):t._e(),"FatJar"==t.form.sourceType?n("el-form-item",[n("el-upload",{staticClass:"upload-demo",attrs:{drag:"","file-list":t.fileList,"on-success":t.onSuccess,action:t.baseUrl+"/container/jarUpload",multiple:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("拖拽或点击文件后会自动上传")])])],1):t._e(),n("el-form-item",[n("el-button",{attrs:{type:"primary",disabled:"FatJar"==t.form.sourceType&&!this.sourceInfo},on:{click:t.onSubmit}},[t._v("Save")])],1)],1)],1),n("el-dialog",{attrs:{title:t.arrangeTitle,visible:t.arrangeVisible},on:{"update:visible":function(e){t.arrangeVisible=e},close:t.closeArrange}},t._l(t.logs,(function(e){return n("h4",{key:e},[t._v(t._s(e))])})),0)],1)},a=[],o=(n("a434"),n("ac1f"),n("5319"),n("1276"),n("56d7")),s={name:"ContainerManager",data:function(){return{form:{sourceType:"Git",containerName:""},gitForm:{repo:"",branch:"",username:"",password:""},sourceInfo:"",id:"",appId:this.$store.state.appInfo.id,dialogVisible:!1,arrangeTitle:"",arrangeVisible:!1,containerList:[],logs:[],baseUrl:o["default"],fileList:[]}},methods:{onSubmit:function(){var t=this,e={appId:this.appId,containerName:this.form.containerName,status:"ENABLE",id:this.id,sourceType:this.form.sourceType};"Git"==this.form.sourceType?e.sourceInfo=JSON.stringify(this.gitForm):(e.sourceInfo=this.sourceInfo,e.sourceType="FatJar"),this.flyio.post("container/save",e).then((function(e){if(e.data.success){var n=t.$store.state.appInfo.id;t.flyio.get("/container/list?appId="+n).then((function(e){e.data.success&&(t.$message("成功创建/修改容器～"),t.dialogVisible=!1,t.form.containerName="",t.gitForm={},t.sourceInfo="",t.id="",t.containerList=e.data.data)}))}else t.$message("创建容器失败～")}))},onSuccess:function(t){this.sourceInfo=t.data},deleteItem:function(t,e){var n=this,i=this.$store.state.appInfo.id;this.flyio.get("/container/delete?containerId="+t.id+"&appId="+i).then((function(i){console.log(i),n.containerList.splice(e,1),n.$message("容器".concat(t.containerName,"已删除"))}))},editItem:function(t){"Git"==t.sourceType?(this.form.sourceType="Git",this.gitForm=JSON.parse(t.sourceInfo)):this.form.sourceType="FatJar",this.form.containerName=t.containerName,this.id=t.id,this.dialogVisible=!0},arrangeItem:function(t){var e=this,n=o["default"].replace("http","ws")+"/container/deploy/",r=n+t.id;i=new WebSocket(r),i.onopen=function(){e.arrangeTitle="机器部署",e.arrangeVisible=!0,console.log("Connection open ..."),i.send("Hello WebSockets!")},i.onmessage=function(t){e.logs.push(t.data)},i.onclose=function(){console.log("Connection closed.")}},closeArrange:function(){i.close(),this.logs=[]},closeEdit:function(){this.sourceInfo="",this.fileList=[]},listOfItem:function(t){var e=this,n=this.$store.state.appInfo.id;this.flyio.get("/container/listDeployedWorker?containerId="+t.id+"&appId="+n).then((function(t){t.data.data&&(e.logs=t.data.data.split("\n"),e.arrangeTitle="机器列表",e.arrangeVisible=!0)}))}},mounted:function(){var t=this,e=this.$store.state.appInfo.id;this.flyio.get("/container/list?appId="+e).then((function(e){console.log(e),e.data.success&&(t.containerList=e.data.data)}))}},l=s,c=(n("0a37"),n("2877")),u=Object(c["a"])(l,r,a,!1,null,"0a0f3a65",null);e["default"]=u.exports},"9f7f":function(t,e,n){"use strict";var i=n("d039");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,n){"use strict";var i=n("23e7"),r=n("23cb"),a=n("a691"),o=n("50c4"),s=n("7b0b"),l=n("65f0"),c=n("8418"),u=n("1dde"),f=n("ae40"),d=u("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,g=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var n,i,u,f,d,p,b=s(this),x=o(b.length),y=r(t,x),I=arguments.length;if(0===I?n=i=0:1===I?(n=0,i=x-y):(n=I-2,i=g(v(a(e),0),x-y)),x+n-i>h)throw TypeError(m);for(u=l(b,i),f=0;f<i;f++)d=y+f,d in b&&c(u,f,b[d]);if(u.length=i,n<i){for(f=y;f<x-i;f++)d=f+i,p=f+n,d in b?b[p]=b[d]:delete b[p];for(f=x;f>x-i+n;f--)delete b[f-1]}else if(n>i)for(f=x-i;f>y;f--)d=f+i-1,p=f+n-1,d in b?b[p]=b[d]:delete b[p];for(f=0;f<n;f++)b[f+y]=arguments[f+2];return b.length=x-i+n,u}})},ac1f:function(t,e,n){"use strict";var i=n("23e7"),r=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ae40:function(t,e,n){var i=n("83ab"),r=n("d039"),a=n("5135"),o=Object.defineProperty,s={},l=function(t){throw t};t.exports=function(t,e){if(a(s,t))return s[t];e||(e={});var n=[][t],c=!!a(e,"ACCESSORS")&&e.ACCESSORS,u=a(e,0)?e[0]:l,f=a(e,1)?e[1]:void 0;return s[t]=!!n&&!r((function(){if(c&&!i)return!0;var t={length:-1};c?o(t,1,{enumerable:!0,get:l}):t[1]=1,n.call(t,u,f)}))}},d5a2:function(t,e,n){},d784:function(t,e,n){"use strict";n("ac1f");var i=n("6eeb"),r=n("d039"),a=n("b622"),o=n("9263"),s=n("9112"),l=a("species"),c=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=a("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var v=a(t),g=!r((function(){var e={};return e[v]=function(){return 7},7!=""[t](e)})),h=g&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[v]=/./[v]),n.exec=function(){return e=!0,null},n[v](""),!e}));if(!g||!h||"replace"===t&&(!c||!u||d)||"split"===t&&!p){var m=/./[v],b=n(v,""[t],(function(t,e,n,i,r){return e.exec===o?g&&!r?{done:!0,value:m.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),x=b[0],y=b[1];i(String.prototype,t,x),i(RegExp.prototype,v,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}f&&s(RegExp.prototype[v],"sham",!0)}},e8b5:function(t,e,n){var i=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}}}]);
//# sourceMappingURL=chunk-45306fc0.6ec7e8f9.js.map