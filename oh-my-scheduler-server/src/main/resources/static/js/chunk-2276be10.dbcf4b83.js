(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2276be10"],{1276:function(t,e,n){"use strict";var r=n("d784"),a=n("44e7"),i=n("825a"),o=n("1d80"),s=n("4840"),l=n("8aa5"),c=n("50c4"),u=n("14c3"),f=n("9263"),d=n("d039"),p=[].push,v=Math.min,g=4294967295,h=!d((function(){return!RegExp(g,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(o(this)),i=void 0===n?g:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!a(t))return e.call(r,t,i);var s,l,c,u=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,h=new RegExp(t.source,d+"g");while(s=f.call(h,r)){if(l=h.lastIndex,l>v&&(u.push(r.slice(v,s.index)),s.length>1&&s.index<r.length&&p.apply(u,s.slice(1)),c=s[0].length,v=l,u.length>=i))break;h.lastIndex===s.index&&h.lastIndex++}return v===r.length?!c&&h.test("")||u.push(""):u.push(r.slice(v)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var a=o(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a,n):r.call(String(a),e,n)},function(t,a){var o=n(r,t,this,a,r!==e);if(o.done)return o.value;var f=i(t),d=String(this),p=s(f,RegExp),m=f.unicode,b=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(h?"y":"g"),x=new p(h?f:"^(?:"+f.source+")",b),y=void 0===a?g:a>>>0;if(0===y)return[];if(0===d.length)return null===u(x,d)?[d]:[];var C=0,_=0,I=[];while(_<d.length){x.lastIndex=h?_:0;var E,S=u(x,h?d:d.slice(_));if(null===S||(E=v(c(x.lastIndex+(h?0:_)),d.length))===C)_=l(d,_,m);else{if(I.push(d.slice(C,_)),I.length===y)return I;for(var T=1;T<=S.length-1;T++)if(I.push(S[T]),I.length===y)return I;_=C=E}}return I.push(d.slice(C)),I}]}),!h)},"14c3":function(t,e,n){var r=n("c6b6"),a=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var i=n.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"1dde":function(t,e,n){var r=n("d039"),a=n("b622"),i=n("2d00"),o=a("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1fb7":function(t,e,n){"use strict";var r=n("4e19"),a=n.n(r);a.a},"44e7":function(t,e,n){var r=n("861d"),a=n("c6b6"),i=n("b622"),o=i("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==a(t))}},"4e19":function(t,e,n){},5319:function(t,e,n){"use strict";var r=n("d784"),a=n("825a"),i=n("7b0b"),o=n("50c4"),s=n("a691"),l=n("1d80"),c=n("8aa5"),u=n("14c3"),f=Math.max,d=Math.min,p=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var m=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=r.REPLACE_KEEPS_$0,x=m?"$":"$0";return[function(n,r){var a=l(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a,r):e.call(String(a),n,r)},function(t,r){if(!m&&b||"string"===typeof r&&-1===r.indexOf(x)){var i=n(e,t,this,r);if(i.done)return i.value}var l=a(t),p=String(this),v="function"===typeof r;v||(r=String(r));var g=l.global;if(g){var C=l.unicode;l.lastIndex=0}var _=[];while(1){var I=u(l,p);if(null===I)break;if(_.push(I),!g)break;var E=String(I[0]);""===E&&(l.lastIndex=c(p,o(l.lastIndex),C))}for(var S="",T=0,w=0;w<_.length;w++){I=_[w];for(var R=String(I[0]),$=f(d(s(I.index),p.length),0),A=[],k=1;k<I.length;k++)A.push(h(I[k]));var F=I.groups;if(v){var N=[R].concat(A,$,p);void 0!==F&&N.push(F);var O=String(r.apply(void 0,N))}else O=y(R,p,$,A,F,r);$>=T&&(S+=p.slice(T,$)+O,T=$+R.length)}return S+p.slice(T)}];function y(t,n,r,a,o,s){var l=r+t.length,c=a.length,u=g;return void 0!==o&&(o=i(o),u=v),e.call(s,u,(function(e,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(l);case"<":s=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>c){var f=p(u/10);return 0===f?e:f<=c?void 0===a[f-1]?i.charAt(1):a[f-1]+i.charAt(1):e}s=a[u-1]}return void 0===s?"":s}))}}))},6547:function(t,e,n){var r=n("a691"),a=n("1d80"),i=function(t){return function(e,n){var i,o,s=String(a(e)),l=r(n),c=s.length;return l<0||l>=c?t?"":void 0:(i=s.charCodeAt(l),i<55296||i>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):i:t?s.slice(l,l+2):o-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},"65f0":function(t,e,n){var r=n("861d"),a=n("e8b5"),i=n("b622"),o=i("species");t.exports=function(t,e){var n;return a(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?r(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},8418:function(t,e,n){"use strict";var r=n("c04e"),a=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var o=r(e);o in t?a.f(t,o,i(0,n)):t[o]=n}},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9263:function(t,e,n){"use strict";var r=n("ad6d"),a=n("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,s=i,l=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=l||u||c;f&&(s=function(t){var e,n,a,s,f=this,d=c&&f.sticky,p=r.call(f),v=f.source,g=0,h=t;return d&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),h=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(v="(?: "+v+")",h=" "+h,g++),n=new RegExp("^(?:"+v+")",p)),u&&(n=new RegExp("^"+v+"$(?!\\s)",p)),l&&(e=f.lastIndex),a=i.call(d?n:f,h),d?a?(a.input=a.input.slice(g),a[0]=a[0].slice(g),a.index=f.lastIndex,f.lastIndex+=a[0].length):f.lastIndex=0:l&&a&&(f.lastIndex=f.global?a.index+a[0].length:e),u&&a&&a.length>1&&o.call(a[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(a[s]=void 0)})),a}),t.exports=s},"97a9":function(t,e,n){"use strict";n.r(e);var r,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span"),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增容器")])],1),n("div",{staticClass:"wrapper"},t._l(t.containerList,(function(e,r){return n("div",{key:r,staticClass:"item"},[n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("容器ID：")]),n("span",{staticClass:"value"},[t._v(t._s(e.id))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v(" 容器名称：")]),n("span",{staticClass:"value"},[t._v(t._s(e.containerName))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("地址类型：")]),n("span",{staticClass:"value"},[t._v(t._s(e.sourceType))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("文件版本：")]),n("span",{staticClass:"value"},[t._v(t._s(e.version))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("部署日期：")]),n("span",{staticClass:"value"},[t._v(t._s(e.lastDeployTime))])]),n("div",{staticClass:"containerText"},[n("span",{staticClass:"value"},[t._v("当前状态：")]),n("span",{staticClass:"value"},[t._v(t._s(e.status))])]),n("div",{staticStyle:{width:"240px",margin:"0 auto"}},[n("div",{staticClass:"btnWrap"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.arrangeItem(e)}}},[t._v("部署")])],1),n("div",{staticClass:"btnWrap"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.editItem(e)}}},[t._v("编辑")])],1),n("div",{staticClass:"btnWrap"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.deleteItem(e,r)}}},[t._v("删除")])],1),n("div",{staticClass:"btnWrap"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.listOfItem(e)}}},[t._v("机器列表")])],1)])])})),0)]),n("el-dialog",{attrs:{title:"新增容器",visible:t.dialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",staticClass:"genTable",attrs:{model:t.form,"label-width":"150px","label-position":"left"}},[n("el-form-item",{attrs:{label:"Container Name"}},[n("el-input",{model:{value:t.form.containerName,callback:function(e){t.$set(t.form,"containerName",e)},expression:"form.containerName"}})],1),n("el-form-item",{attrs:{label:"地址类型"}},[n("el-radio-group",{model:{value:t.form.sourceType,callback:function(e){t.$set(t.form,"sourceType",e)},expression:"form.sourceType"}},[n("el-radio",{attrs:{label:"Git"}}),n("el-radio",{attrs:{label:"FatJar"}})],1)],1),"Git"==t.form.sourceType?n("el-form",{ref:"gitform",staticClass:"gitTable",attrs:{model:t.gitForm,"label-width":"150px","label-position":"left"}},[n("el-form-item",{attrs:{label:"Git仓库地址"}},[n("el-input",{model:{value:t.gitForm.repo,callback:function(e){t.$set(t.gitForm,"repo",e)},expression:"gitForm.repo"}})],1),n("el-form-item",{attrs:{label:"分支名称"}},[n("el-input",{model:{value:t.gitForm.branch,callback:function(e){t.$set(t.gitForm,"branch",e)},expression:"gitForm.branch"}})],1),n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:t.gitForm.username,callback:function(e){t.$set(t.gitForm,"username",e)},expression:"gitForm.username"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{model:{value:t.gitForm.password,callback:function(e){t.$set(t.gitForm,"password",e)},expression:"gitForm.password"}})],1)],1):t._e(),"FatJar"==t.form.sourceType?n("el-form-item",[n("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":t.onSuccess,action:t.baseUrl+"/container/jarUpload",multiple:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("拖拽或点击文件后会自动上传")])])],1):t._e(),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Save")])],1)],1)],1),n("el-dialog",{attrs:{title:t.arrangeTitle,visible:t.arrangeVisible},on:{"update:visible":function(e){t.arrangeVisible=e},close:t.closeArrange}},t._l(t.logs,(function(e){return n("h4",{key:e},[t._v(t._s(e))])})),0)],1)},i=[],o=(n("a434"),n("ac1f"),n("5319"),n("1276"),n("56d7")),s={name:"ContainerManager",data:function(){return{form:{sourceType:"Git",containerName:""},gitForm:{repo:"",branch:"",username:"",password:""},sourceInfo:"",id:"",appId:this.$store.state.appInfo.id,dialogVisible:!1,arrangeTitle:"",arrangeVisible:!1,containerList:[],logs:[],baseUrl:o["default"]}},methods:{onSubmit:function(){var t=this,e={appId:this.appId,containerName:this.form.containerName,status:"ENABLE",id:this.id,sourceType:this.form.sourceType};"Git"==this.form.sourceType?e.sourceInfo=JSON.stringify(this.gitForm):(e.sourceInfo=this.sourceInfo,e.sourceType="FatJar"),this.flyio.post("container/save",e).then((function(e){if(e.data.success){var n=t.$store.state.appInfo.id;t.flyio.get("/container/list?appId="+n).then((function(e){e.data.success&&(t.$message("成功创建/修改容器～"),t.dialogVisible=!1,t.form.containerName="",t.gitForm={},t.sourceInfo="",t.id="",t.containerList=e.data.data)}))}else t.$message("创建容器失败～")}))},onSuccess:function(t){this.sourceInfo=t.data},deleteItem:function(t,e){var n=this,r=this.$store.state.appInfo.id;this.flyio.get("/container/delete?containerId="+t.id+"&appId="+r).then((function(r){console.log(r),n.containerList.splice(e,1),n.$message("容器".concat(t.containerName,"已删除"))}))},editItem:function(t){"Git"==t.sourceType?(this.form.sourceType="Git",this.gitForm=JSON.parse(t.sourceInfo)):this.form.sourceType="FatJar",this.form.containerName=t.containerName,this.id=t.id,this.dialogVisible=!0},arrangeItem:function(t){var e=this,n=o["default"].replace("http","ws")+"/container/deploy/",a=n+t.id;r=new WebSocket(a),r.onopen=function(){e.arrangeTitle="机器部署",e.arrangeVisible=!0,console.log("Connection open ..."),r.send("Hello WebSockets!")},r.onmessage=function(t){e.logs.push(t.data)},r.onclose=function(){console.log("Connection closed.")}},closeArrange:function(){r.close(),this.logs=[]},listOfItem:function(t){var e=this,n=this.$store.state.appInfo.id;this.flyio.get("/container/listDeployedWorker?containerId="+t.id+"&appId="+n).then((function(t){t.data.data&&(e.logs=t.data.data.split("\n"),e.arrangeTitle="机器列表",e.arrangeVisible=!0)}))}},mounted:function(){var t=this,e=this.$store.state.appInfo.id;this.flyio.get("/container/list?appId="+e).then((function(e){console.log(e),e.data.success&&(t.containerList=e.data.data)}))}},l=s,c=(n("1fb7"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"a185abac",null);e["default"]=u.exports},"9f7f":function(t,e,n){"use strict";var r=n("d039");function a(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),o=n("50c4"),s=n("7b0b"),l=n("65f0"),c=n("8418"),u=n("1dde"),f=n("ae40"),d=u("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,g=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var n,r,u,f,d,p,b=s(this),x=o(b.length),y=a(t,x),C=arguments.length;if(0===C?n=r=0:1===C?(n=0,r=x-y):(n=C-2,r=g(v(i(e),0),x-y)),x+n-r>h)throw TypeError(m);for(u=l(b,r),f=0;f<r;f++)d=y+f,d in b&&c(u,f,b[d]);if(u.length=r,n<r){for(f=y;f<x-r;f++)d=f+r,p=f+n,d in b?b[p]=b[d]:delete b[p];for(f=x;f>x-r+n;f--)delete b[f-1]}else if(n>r)for(f=x-r;f>y;f--)d=f+r-1,p=f+n-1,d in b?b[p]=b[d]:delete b[p];for(f=0;f<n;f++)b[f+y]=arguments[f+2];return b.length=x-r+n,u}})},ac1f:function(t,e,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ae40:function(t,e,n){var r=n("83ab"),a=n("d039"),i=n("5135"),o=Object.defineProperty,s={},l=function(t){throw t};t.exports=function(t,e){if(i(s,t))return s[t];e||(e={});var n=[][t],c=!!i(e,"ACCESSORS")&&e.ACCESSORS,u=i(e,0)?e[0]:l,f=i(e,1)?e[1]:void 0;return s[t]=!!n&&!a((function(){if(c&&!r)return!0;var t={length:-1};c?o(t,1,{enumerable:!0,get:l}):t[1]=1,n.call(t,u,f)}))}},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),a=n("d039"),i=n("b622"),o=n("9263"),s=n("9112"),l=i("species"),c=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=i("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var v=i(t),g=!a((function(){var e={};return e[v]=function(){return 7},7!=""[t](e)})),h=g&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[v]=/./[v]),n.exec=function(){return e=!0,null},n[v](""),!e}));if(!g||!h||"replace"===t&&(!c||!u||d)||"split"===t&&!p){var m=/./[v],b=n(v,""[t],(function(t,e,n,r,a){return e.exec===o?g&&!a?{done:!0,value:m.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),x=b[0],y=b[1];r(String.prototype,t,x),r(RegExp.prototype,v,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}f&&s(RegExp.prototype[v],"sham",!0)}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);
//# sourceMappingURL=chunk-2276be10.dbcf4b83.js.map